"use strict";(self.webpackChunkpayload_blog_typescript=self.webpackChunkpayload_blog_typescript||[]).push([[491],{86491:(e,a,l)=>{l.r(a),l.d(a,{default:()=>R});var t=l(67294),n=l(16550),i=l(9980),s=l(28630),r=l(75091),c=l(47489),o=l(40684),d=l(73727),m=l(49546),u=l(28584),v=l(11687),p=l(4983),E=l(46268),_=l(5590),f=l(55532),$=l(89877),b=l(38398),h=l(50854),N=l(37276),Z=l(73588),g=l(40829),y=l(9684),A=l(92962),w=l(10935);const k=()=>{const{theme:e,setTheme:a,autoMode:l}=(0,w.Fg)(),n=(0,t.useCallback)((e=>{a(e)}),[a]);return t.createElement(A.Z,{name:"theme",label:"Admin Theme",value:l?"auto":e,onChange:n,options:[{label:"Automatic",value:"auto"},{label:"Light",value:"light"},{label:"Dark",value:"dark"}]})};var P=l(69850);l(30086);const S="account",C=e=>{var a,l,n,s;const{collection:r,data:c,permissions:o,hasSavePermission:A,apiURL:w,initialState:C,isLoading:L,action:T}=e,{slug:U,fields:D,admin:{useAsTitle:R,preview:F},timestamps:I,auth:K}=r,{admin:{dateFormat:M},routes:{admin:O}}=(0,i.Z)(),j=[S].filter(Boolean).join(" ");return t.createElement("div",{className:j},L&&t.createElement(g.Z,null),!L&&t.createElement(y.R.Provider,{value:"update"},t.createElement(v.Z,{className:`${S}__form`,method:"patch",action:T,initialState:C,disabled:!A},t.createElement("div",{className:`${S}__main`},t.createElement(N.Z,{title:"Account",description:"Account of current user",keywords:"Account, Dashboard, Payload, CMS"}),t.createElement(u.Z,null),!((null===(a=r.versions)||void 0===a?void 0:a.drafts)&&(null===(n=null===(l=r.versions)||void 0===l?void 0:l.drafts)||void 0===n?void 0:n.autosave))&&t.createElement(h.Z,null),t.createElement("div",{className:`${S}__edit`},t.createElement(P.T,{className:`${S}__header`},t.createElement("h1",null,t.createElement(b.Z,{data:c,useAsTitle:R,fallback:"[Untitled]"})),t.createElement(Z.Z,{useAPIKey:K.useAPIKey,collection:r,email:null==c?void 0:c.email,operation:"update"}),t.createElement(_.Z,{permissions:o.fields,readOnly:!A,filter:e=>{var a;return"sidebar"!==(null===(a=null==e?void 0:e.admin)||void 0===a?void 0:a.position)},fieldTypes:$.Z,fieldSchema:D})),t.createElement(P.T,{className:`${S}__payload-settings`},t.createElement("h3",null,"Payload Settings"),t.createElement(k,null)))),t.createElement("div",{className:`${S}__sidebar-wrap`},t.createElement("div",{className:`${S}__sidebar`},t.createElement("div",{className:`${S}__sidebar-sticky-wrap`},t.createElement("ul",{className:`${S}__collection-actions`},(null===(s=null==o?void 0:o.create)||void 0===s?void 0:s.permission)&&t.createElement(t.Fragment,null,t.createElement("li",null,t.createElement(d.Link,{to:`${O}/collections/${U}/create`},"Create New")))),t.createElement("div",{className:`${S}__document-actions${F?` ${S}__document-actions--with-preview`:""}`},t.createElement(p.Z,{generatePreviewURL:F,data:c}),A&&t.createElement(E.Z,null,"Save")),t.createElement("div",{className:`${S}__sidebar-fields`},t.createElement(_.Z,{permissions:o.fields,readOnly:!A,filter:e=>{var a;return"sidebar"===(null===(a=null==e?void 0:e.admin)||void 0===a?void 0:a.position)},fieldTypes:$.Z,fieldSchema:D})),t.createElement("ul",{className:`${S}__meta`},t.createElement("li",{className:`${S}__api-url`},t.createElement("span",{className:`${S}__label`},"API URL"," ",t.createElement(f.Z,{value:w})),t.createElement("a",{href:w,target:"_blank",rel:"noopener noreferrer"},w)),t.createElement("li",null,t.createElement("div",{className:`${S}__label`},"ID"),t.createElement("div",null,null==c?void 0:c.id)),I&&t.createElement(t.Fragment,null,c.updatedAt&&t.createElement("li",null,t.createElement("div",{className:`${S}__label`},"Last Modified"),t.createElement("div",null,(0,m.default)(new Date(c.updatedAt),M))),c.createdAt&&t.createElement("li",null,t.createElement("div",{className:`${S}__label`},"Created"),t.createElement("div",null,(0,m.default)(new Date(c.createdAt),M)))))))))))};var L=l(19826),T=l(2143),U=l(45074),D=l(91455);const R=()=>{var e,a;const{state:l}=(0,n.TH)(),d=(0,o.bU)(),{setStepNav:m}=(0,r.FP)(),{user:u,permissions:v}=(0,s.a)(),[p,E]=(0,t.useState)(),{id:_,preferencesKey:f}=(0,U.x5)(),{getPreference:$}=(0,D.G)(),{serverURL:b,routes:{api:h},collections:N,admin:{user:Z,components:{views:{Account:g}={Account:void 0}}={}}={user:"users"}}=(0,i.Z)(),y=N.find((e=>e.slug===Z)),{fields:A}=y,w=null===(e=null==v?void 0:v.collections)||void 0===e?void 0:e[Z],[{data:k}]=(0,c.Z)(`${b}${h}/${null==y?void 0:y.slug}/${null==u?void 0:u.id}?depth=0`,{initialParams:{"fallback-locale":"null"}}),P=null===(a=null==w?void 0:w.update)||void 0===a?void 0:a.permission,S=(null==l?void 0:l.data)||k,R=`${b}${h}/${u.collection}/${null==k?void 0:k.id}`,F=`${b}${h}/${u.collection}/${null==k?void 0:k.id}?locale=${d}&depth=0`;return(0,t.useEffect)((()=>{m([{label:"Account"}])}),[m]),(0,t.useEffect)((()=>{(async()=>{const e=await(0,L.Z)({fieldSchema:A,data:S,operation:"update",id:_,user:u,locale:d});await $(f),E(e)})()}),[S,A,_,u,d,f,$]),t.createElement(T.Z,{DefaultComponent:C,CustomComponent:g,componentProps:{action:F,data:k,collection:y,permissions:w,hasSavePermission:P,initialState:p,apiURL:R,isLoading:!p}})}}}]);